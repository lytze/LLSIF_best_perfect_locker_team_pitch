<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<title>The Best Perfect-locker Team Organizer</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1274, user-scalable=no">
	<meta name="description" content="The Best Perfect-locker Team Organizer">
	<meta name="author" content="Li Yutze (Lytze)">
	<meta name="generator" content="slidify" />
	<!-- LOAD STYLE SHEETS -->
	<link rel="stylesheet" href="libraries/frameworks/shower/themes/ribbon/styles/screen.css">
	<link rel="stylesheet" media="print"
	  href="libraries/frameworks/shower/themes/ribbon/styles/print.css">
	<link rel="stylesheet" href="libraries/highlighters/highlight.js/css/ribon.css">  <link rel="stylesheet" href = "assets/css/ribbons.css">

	<!--
		To apply styles to the certain slides
		use slide ID to get needed elements
		-->
	<style>
		#Cover h2 {
      margin:65px 0 0;
			color:#FFF;
			text-align:center;
			font-size:70px;
			}
		#FitToWidth h2,
		#FitToHeight h2 {
			color:#FFF;
			text-align:center;
			}
	</style> 
</head>
<body class="list">
  <header class="caption">
  	<h1>The Best Perfect-locker Team Organizer</h1>
	</header>
  <section class="slide " id="slide-1">
  <div>
    <h2></h2>
    <script type="text/javascript">
    // add subtitle
    e = document.getElementsByTagName("header")[0]
    subtitle = document.createElement("p")
    subtitle.appendChild(document.createTextNode("A Love Live! SIF Game Helper Tool"))
    subtitle.setAttribute("style", "margin: 10px 0 0 0")
    author = document.createElement("span")
    author.appendChild(document.createTextNode("Li Yutze (Lytze)"))
    author.setAttribute("style", "font-size:75%;font-style:italic;color:#444")
    e.appendChild(subtitle)
    e.appendChild(author)

    // reactive table
    cardListRowClick = function(row) {
    if (row.cells[0].childNodes[1].checked) {
        row.cells[0].childNodes[1].checked = false
    }
    else {
        row.cells[0].childNodes[1].checked = true
    }

    if (row.cells[0].childNodes[1].checked) 
        row.setAttribute("style", "background-color: #bfb; text-shadow: 0px 0px 7px #777")
    else
        row.removeAttribute("style")
    $(row.cells[0].childNodes[1]).trigger("change")
}
</script>

<style>
section p, section li, section code{
    font-size: 65%
}
table.shtable {
    font-family: verdana,arial,sans-serif;
    font-size:11px;
    border-collapse: collapse;
    width: 100%;
}
table.shtable th {
    border-width: 1px;
    padding: 8px;
    background-color: #dedede;
    height: 70;
}
table.shtable td {
    padding: 3px;
    border-bottom-style: solid;
    border-bottom-width: 1px;
    border-bottom-color: #dedede;
}
table.shtable tbody tr {
    background-color: #ffffff;
    cursor: pointer;
}
table.shtable tr:hover {
    background-color: #ffb;
}
table.shtable tr td input {
    display: none;
}
</style>

<h2>Outline</h2>

<hr>

<p><br></p>

<ul>
<li><em><strong>Background</strong></em>: Love Live SIF, what does the App help for<br></li>
<li><em><strong>Feathers and usage</strong></em>: the current version<br></li>
<li><em><strong>Implementation</strong></em>: under the UI page, what happens<br></li>
<li>References and Linkouts</li>
</ul>

  </div>
</section>
<section class="slide " id="slide-2">
  <div>
    <h2>Background</h2>
    <hr>

<p><em><strong>Love Live! School Idol Festival</strong></em> is an popular mobile rytheme game, also part of the <a href="">Love Live! School Idol Project</a>, a multi-media project including TV animes, musics and lives, so on and also the mobile game. Our Shiny-app is designed as a <em><strong>helper tool</strong></em> for the players of this game.<br>
As common <em><strong>rytheme game</strong></em>, hitting the note too late or early will break the combo, while combo number gives extra bonus in the game. But in Love Live SIF, cards of different characters may have skills which can add effect to the team to loosen the miss criterion. And these cards have such type of skill are called <em><strong>perfect-lockers</strong></em>.<br>
Our shiny-app is aimed to choose from perfect-locker cards having <em><strong>different parameters</strong></em> (yell intervals, success rates and effect durations) the user has, to organize a best team that maximize the overall probability of having the effect during a live.</p>

  </div>
</section>
<section class="slide " id="slide-3">
  <div>
    <h2>Feathers and Usage</h2>
    <hr>

<div id="selectedCard" class="form-group shiny-input-checkboxgroupshiny-input-container" style="width: 100%"><div class="shiny-options-group"><table class="shtable">
 <thead>
  <tr>
   <th style="text-align:center;"> Card_ID </th>
   <th style="text-align:center;"> Image </th>
   <th style="text-align:center;"> Character </th>
   <th style="text-align:center;"> Yell_Interval </th>
   <th style="text-align:center;"> Success_Rate </th>
   <th style="text-align:center;"> Effect_Duration </th>
  </tr>
 </thead>
<tbody>
  <tr onclick="cardListRowClick(this)"><td style="text-align:center;"> <input type="checkbox" name="selectedCard" id="selectedCard1" value="133" />133 </td>
   <td style="text-align:center;"> <img src="./img/133.jpg" height="50px" width="50px"><img src="./img/133_ido.jpg" height="50px" width="50px"> </td>
   <td style="text-align:center;"> Koizumi Hanayo </td>
   <td style="text-align:center;"> 10 sec </td>
   <td style="text-align:center;"> 18% </td>
   <td style="text-align:center;"> 5 sec </td>
  </tr>
  <tr onclick="cardListRowClick(this)"><td style="text-align:center;"> <input type="checkbox" name="selectedCard" id="selectedCard2" value="272" />272 </td>
   <td style="text-align:center;"> <img src="./img/272.jpg" height="50px" width="50px"><img src="./img/272_ido.jpg" height="50px" width="50px"> </td>
   <td style="text-align:center;"> Hoshizora Rin </td>
   <td style="text-align:center;"> 13 sec </td>
   <td style="text-align:center;"> 44% </td>
   <td style="text-align:center;"> 6 sec </td>
  </tr>
</tbody>
</table></div></div>

<p><p/></p>

<p>First, users need to select cards he/she has from the given list. Above is part of the list, which is accually a customed <code>checkboxGroupInput()</code>. The checkboxes are located on the first column in the list before the ID number, and set the hidden using additional <strong>javascript</strong>. Click (<em><strong>you can try it here</strong></em>) the row will check the coressponding box, which is also defined in the <strong>javascript</strong>, and render the input via <strong>jQuery</strong> <code>.trigger(&quot;change&quot;)</code>.</p>

  </div>
</section>
<section class="slide " id="slide-4">
  <div>
    <h2>Feathers and Usage</h2>
    <hr>

<p><img src="img/addnew.png" height="250px"></p>

<p>Second, on the <strong>right panel</strong> users can add cards that are not presented in the list.</p>

  </div>
</section>
<section class="slide " id="slide-5">
  <div>
    <h2>Feathers and Usage</h2>
    <hr>

<p><img src="img/submit.png" height="200px"></p>

<p>Then, the user can fix the <strong>parameters</strong>, and <strong>submit</strong> the run. If the user has selected less than 10 cards (sence the team is a collection of 9 cards), the app will warn the user the add more cards.</p>

  </div>
</section>
<section class="slide " id="slide-6">
  <div>
    <h2>Feathers and Usage</h2>
    <hr>

<p>After submitting the form, the server will run for a while and return the best collection of cards.<br>
Using shiny&#39;s <code>withProgress()</code>, the app can tell the running progress of the program.</p>

<p><img src="img/after_submit.png" height="150px"></p>

  </div>
</section>
<section class="slide " id="slide-7">
  <div>
    <h2>Implementation</h2>
    <hr>

<p>To find the best collection, the program need to optimize some effect value. In this case the value is defined as<br>
\[Effect = \sum_{time:\ T}{Pr(on\ perfect\ locking\ condition,\ time = T)}\]
And the probability for the state for time <strong>T</strong> is
\[Pr(on\ condition,\ time = T) = 1 - \sum_{card:\ i}{1 - Pr(card = i,\ time = t,\ success)}\]
This shiny app utilized the <em><strong>Gibbs sampler</strong></em> method to generate the optimized result, which could avoid local optimum for some extend.</p>

  </div>
</section>
<section class="slide " id="slide-8">
  <div>
    <h2>Implementation</h2>
    <hr>

<p>Firstly the sampler will generate a random 9-card list from selected. For each iteration, the sampler <em><strong>discard</strong></em> one card from the current list randomly according to the <em><strong>contribution</strong></em> of that card to the effect.
\[Contribution_{card:\ i} = Effect_{current\ 9-card\ team} - Effect_{-card:\ i}\]
\[Pr_{discard,\ card:\ i} \propto max(Contribution) - Contribution_{card:\ i}\]
And then from the candidate list (including the just-discarded card), the sampler select one card randomly to insert back to the list, also, according to the contribution of each card.
\[Contribution_{card:\ i} = Effect_{+card:\ i} - Effect_{current\ 8-card\ team}\]
\[Pr_{insert,\ card:\ i} \propto Contribution_{card:\ i} - min(Contribution)\]</p>

  </div>
</section>
<section class="slide " id="slide-9">
  <div>
    <h2>Implementation</h2>
    <hr>

<p>After certain number of iteration, or after the maximum effect has occurs for a certain time, the iteration stops, and the collection of cards that generates the maximum effect will be reported. The recorded effect during running may looks like:
<img src="assets/fig/unnamed-chunk-2-1.png" title="plot of chunk unnamed-chunk-2" alt="plot of chunk unnamed-chunk-2" style="display: block; margin: auto;" />
In the figure, red dots are max recorded effects. In this case the program has maxium recorded effect more than threshold 5 times, so the iteration breaks at middle.</p>

  </div>
</section>
<section class="slide " id="slide-10">
  <div>
    <h2>References and Linkouts</h2>
    <hr>

<p><br></p>

<ul>
<li>The official site for the mobile game <a href="http://www.school-fes.klabgames.net/"><em><strong>Love Live! SIF</strong></em></a></li>
<li>The Gibbs sampler method is inspired by <a href="https://www.youtube.com/watch?v=1EMonM7qAU8"><em><strong>this video</strong></em></a> on youtube</li>
<li>And the shiny-app is hosted on my website: <a href="http://www.lytzeworkshop.com:3838/playground/shiny_app/best_pf_locker_en_ver/"><em><strong>English version</strong></em></a> and <a href="http://www.lytzeworkshop.com:3838/playground/shiny_app/best_pf_locker_cn_ver/"><em><strong>中文版</strong></em></a></li>
<li>The <a href="https://github.com/lytze/LLSIF_best_perfect_locker_team"><em><strong>github repo</strong></em></a> for this shiny-app
And welcome visiting <a href="http://www.lytzeworkshop.com/"><em><strong>my homepage</strong></em></a></li>
</ul>

  </div>
</section>
  <div class="progress">
    <div></div>
  </div>
	<script src="libraries/frameworks/shower/shower.js"></script>
	<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
	<script type="text/x-mathjax-config">
	  MathJax.Hub.Config({
	    tex2jax: {
	      inlineMath: [['$','$'], ['\\(','\\)']],
	      processEscapes: true
	    }
	  });
	</script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script> -->
	<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
	<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<!-- DONE LOADING HIGHLIGHTER JS FILES -->
	 
		<!-- Copyright © 2010–2012 Vadim Makeev — pepelsbey.net -->
	<!-- Photos by John Carey — fiftyfootshadows.net -->
</body>
</html>